#!/bin/bash

# Create the CSV report file with headers
echo "Name,Height(m),Weight(kg)" > pokemon_report.csv

# Loop through all .json files
for file in *.json
do
    # Extract data with jq
    jq -r '[.name, (.height/10), (.weight/10)] | @csv' "$file" >> pokemon_report.csv
done

# Print the CSV contents
echo "=== PokÃ©mon Report ==="
cat pokemon_report.csv

# Use awk to calculate average height and weight (skip header)
awk -F',' 'NR>1 {height+=$2; weight+=$3; count++} 
    END {
        if (count > 0) {
            printf "\nAverage height: %.2fm\nAverage weight: %.2fkg\n", height/count, weight/count;
        } else {
            print "No data to compute averages."
        }
    }' pokemon_report.csv
